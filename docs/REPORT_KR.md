# D-HASH: λ¶„μ‚° μΊμ‹ λ΅λ“ λ°Έλ°μ‹±μ„ μ„ν• λ™μ  Hot-key λ€μ‘ ν•΄μ‹±

> **"μƒμ„ 1% λ°μ΄ν„°κ°€ μ „μ²΄ νΈλν”½μ 40%λ¥Ό μ°¨μ§€ν•λ” 'ν•«ν‚¤(Hot-key)' λ³‘λ© ν„μƒμ„ ν•΄κ²°ν•κΈ° μ„ν• ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λΌμ°ν… λ μ΄μ–΄ μ—°κµ¬"**

<p align="left">
  <img src="https://img.shields.io/badge/Python-3.11-3776AB?style=flat-square&logo=python&logoColor=white"/>
  <img src="https://img.shields.io/badge/Redis-7.4.2-DC382D?style=flat-square&logo=redis&logoColor=white"/>
  <img src="https://img.shields.io/badge/TIIS_(SCIE)-In_Press-0066CC?style=flat-square&logo=googlescholar&logoColor=white"/>
</p>

## λ…Όλ¬Έ μ •λ³΄
* **μ λ©**: D-HASH: Dynamic Hot-key Aware Scalable Hashing for Load Balancing in Distributed Cache Systems
* **ν•™μ μ§€**: TIIS 2026 κ²μ¬ μμ • (SCIE)
* **μ €μ**: λ°©ν, μ „μƒν›

<br/>

## π“ 1. ν”„λ΅μ νΈ μ”μ•½
μ‹¤μ  NASA μ›Ή λ΅κ·Έ λ¶„μ„ κ²°κ³Ό, **μƒμ„ 1%μ λ°μ΄ν„°κ°€ μ „μ²΄ μ”μ²­μ 40% μ΄μƒμ„ μ°¨μ§€ν•λ” ν•«ν‚¤ λ¬Έμ **λ¥Ό ν™•μΈν–μµλ‹λ‹¤. κΈ°μ΅΄ Consistent HashingμΌλ΅λ” ν•΄κ²°ν•κΈ° μ–΄λ ¤μ΄ μ΄ μ λ¦Ό ν„μƒμ„ ν’€κΈ° μ„ν•΄, μ„λ²„ κµ¬μ΅° λ³€κ²½ μ—†μ΄ ν΄λΌμ΄μ–ΈνΈ SDK μμ •λ§μΌλ΅ νΈλν”½μ„ λ¶„μ‚°μ‹ν‚¤λ” **D-HASH** μ•κ³ λ¦¬μ¦μ„ μ„¤κ³„ν•κ³  κµ¬ν„ν–μµλ‹λ‹¤.

<br/>


## 2. μ‹μ¤ν… κµ¬μ΅°
![System Architecture](../docs/images/dhash_architecture.png)

* **κ°μ§€ λ° λΌμ°ν…**: ν΄λΌμ΄μ–ΈνΈ λ‚΄λ¶€μ LRU μΉ΄μ΄ν„°λ΅ μ”μ²­ λΉλ„λ¥Ό μ¬κ³ , μ„κ³„κ°’μ„ λ„μΌλ©΄ μ‹¤μ‹κ°„μΌλ΅ κ²½λ΅λ¥Ό λ°”κΏ‰λ‹λ‹¤.
* **λ°μ΄ν„° μ •ν•©μ„±**: μ½κΈ° μ”μ²­μ€ λ‚λ„λ, μ“°κΈ° μ”μ²­μ€ λ°μ΄ν„°κ°€ κΌ¬μ΄μ§€ μ•λ„λ΅ ν•­μƒ λ©”μΈ λ…Έλ“(Primary)μ—λ§ κΈ°λ΅ν•λ” **Write-Primary** μ „λµμ„ μ”λ‹λ‹¤.

<br/>

## 3. ν•µμ‹¬ λ΅μ§: Guard Phase (μμ—΄ κµ¬κ°„)
ν•«ν‚¤λ΅ νλ‹¨λμ–΄ λ…Έλ“κ°€ λ°”λ€λ” μκ°„, μƒλ΅μ΄ λ…Έλ“μ— λ°μ΄ν„°κ°€ μ—†μ–΄ μ‘λ‹µμ΄ λ¦μ–΄μ§€λ” λ¬Έμ (Cold Start)λ¥Ό λ§‰κΈ° μ„ν•΄ **Guard Phase**λ¥Ό λ„μ…ν–μµλ‹λ‹¤.

~~~python
# src/dhash_experiments/algorithms.py

# Guard Phase: λ…Έλ“ μ „ν™ μ§ν›„ μ²« λ²μ§Έ κµ¬κ°„(W) λ™μ•μ€ λ©”μΈ λ…Έλ“λ΅ λ³΄λ‚΄λ©΄μ„ μƒλ΅μ΄ λ…Έλ“ μμ—΄ μ λ„
if delta < self.W:
    return self._primary_safe(key)
    
# μ΄ν›„ κµ¬κ°„ λ‹¨μ„λ΅ λ©”μΈ λ…Έλ“μ™€ λ€μ²΄ λ…Έλ“λ¥Ό λ²κ°μ•„ νΈμ¶ν•λ©° λ¶€ν• λ¶„μ‚°
epoch = (delta - self.W) // self.W
return self.alt[key] if (epoch % 2 == 0) else self._primary_safe(key)
~~~

<br/>

## 4. μ‹¤ν— κ²°κ³Ό (Zipf alpha=1.5 κΈ°μ¤€)
* **λ¶€ν• λ¶„μ‚°**: κΈ°μ΅΄ λ°©μ‹λ³΄λ‹¤ λ…Έλ“ κ°„ λ¶€ν• νΈμ°¨λ¥Ό **33.8% μ¤„μ€μµλ‹λ‹¤**.
* **μ„±λ¥ μ¤λ²„ν—¤λ“**: μ¶”κ°€ λ΅μ§μΌλ΅ μΈν• μ²λ¦¬λ‰ μ €ν•λ” **7% λ‚΄μ™Έ**λ΅ λ§‰μ•μµλ‹λ‹¤.

| μ•κ³ λ¦¬μ¦ | μ²λ¦¬λ‰ (ops/s) | λ¶€ν• ν‘μ¤€νΈμ°¨ (π”») | κ°μ„ μ¨ |
|:---|:---:|:---:|:---:|
| Consistent Hashing | 179,902 | 49,944 | - |
| **D-HASH (μ μ•)** | **167,092** | **33,054** | **33.8% κ°μ„ ** |


<br/>

## 5. νΈλ¬λΈ”μν…

### 1) ν•΄μ‹± μ¤λ²„ν—¤λ“ μµμ ν™” (`xxHash64`, `__slots__`)
* **λ¬Έμ **: λ€κ·λ¨ μ‹λ‚λ¦¬μ¤ μ‹ MD5 μ—°μ‚°μ λ†’μ€ CPU λΉ„μ©μΌλ΅ μ²λ¦¬λ‰μ΄ κΈ‰κ°ν•κ³ , Python κ°μ²΄ μ¤λ²„ν—¤λ“λ΅ μΈν• λ©”λ¨λ¦¬ λ¶€μ΅± λ°μƒ.
* **ν•΄κ²°**: μ•”νΈν™”μ©μ΄ μ•„λ‹ κ³ μ† λΉ„μ•”νΈν™” ν•΄μ‹ `xxHash64`λ΅ κµμ²΄ν•κ³ , ν΄λμ¤μ— `__slots__`λ¥Ό μ μ©ν•΄ μΈμ¤ν„΄μ¤ λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μµμ ν™”.
* **κ²°κ³Ό**: **ν•΄μ‹± μ†λ„ 20λ°° ν–¥μƒ λ° λ©”λ¨λ¦¬ 50% μ κ°**μΌλ΅ 10λ§ κ° μ΄μƒμ ν‚¤ ν…μ¤νΈ ν™κ²½ ν™•λ³΄.
* [π‘‰ ν¬μ¤νΈ λ³΄λ¬κ°€κΈ°](https://hzeror.netlify.app/D-HASH-xxhash/)

### 2) λ…Έλ“ μ „ν™ κµ¬κ°„ μ§€μ—°(Latency Spike) λ°©μ–΄
* **λ¬Έμ **: ν•«ν‚¤ νƒμ§€ μ§ν›„ λ…Έλ“κ°€ μ „ν™λ  λ•, λ€μƒ λ…Έλ“μ— λ°μ΄ν„°κ°€ μ—†λ” 'Cold Start' ν„μƒμΌλ΅ μΈν• μΌμ‹μ  μ‘λ‹µ μ§€μ—° λ°μƒ.
* **ν•΄κ²°**: μ „ν™ μ „ν›„λ΅ μΌμ • κΈ°κ°„ λ°μ΄ν„°λ¥Ό μ–‘μ½ λ…Έλ“μ— μ μ§€ν•λ” **Guard Phase**μ™€ λΉ„λ™κΈ° μ‚¬μ „ μμ—΄(Pre-warming) μ „λµ λ„μ….
* **κ²°κ³Ό**: μ „ν™ κµ¬κ°„ μ„±λ¥ μ €ν•λ¥Ό λ°©μ§€ν•κ³ , κ·Ήν•μ μ λ¦Ό ν™κ²½($\alpha=1.5$)μ—μ„ **λ¶€ν• λ¶κ· ν• 33.8% κ°μ„ **.
* [π‘‰ ν¬μ¤νΈ λ³΄λ¬κ°€κΈ°](https://hzeror.netlify.app/D-HASH-guard-phase/)

### 3) λ°μ΄ν„° μ •ν•©μ„±μ„ μ„ν• Write-Primary κµ¬μ΅°
* **λ¬Έμ **: μ½κΈ° λ¶„μ‚° λ΅μ§μ„ μ“°κΈ° μ”μ²­μ— λ™μΌν•κ² μ μ©ν•  κ²½μ°, λ°μ΄ν„°κ°€ μ—¬λ¬ λ…Έλ“μ— ννΈν™”λμ–΄ μµμ‹ μ„± λ³΄μ¥μ΄ μ–΄λ ¤μ›€.
* **ν•΄κ²°**: μ½κΈ°λ” λ™μ μΌλ΅ λ¶„μ‚°ν•λ, μ“°κΈ°λ” ν•΄μ‹ λ§μ΄ μ§€μ •ν• μ£Ό λ…Έλ“(Primary)μ— ν•­μƒ κ³ μ •ν•λ” μ „λµ μ±„νƒ.
* **κ²°κ³Ό**: λ³µμ΅ν• λ¶„μ‚° λ½ μ—†μ΄ **λ°μ΄ν„° ννΈν™” 0%** λ‹¬μ„± λ° μ‹μ¤ν… λ³µμ΅λ„ μµμ†ν™”.
* [π‘‰ ν¬μ¤νΈ λ³΄λ¬κ°€κΈ°](https://hzeror.netlify.app/D-HASH-routing-strategy/)

### 4) κ³ λ¶€ν• κ²€μ¦μ„ μ„ν• λΉ„λ™κΈ° ν…μ¤νΈ ν΄ κ°λ°
* **λ¬Έμ **: λ™κΈ° λ°©μ‹(Blocking I/O) ν…μ¤νΈλ” ν΄λΌμ΄μ–ΈνΈ λ€κΈ° μ‹κ°„ λ•λ¬Έμ— μ„λ²„μ μ‹¤μ  ν•κ³„ μ²λ¦¬λ‰ μΈ΅μ • λ¶κ°€.
* **ν•΄κ²°**: `ThreadPoolExecutor`λ¥Ό ν™μ©ν•΄ I/Oλ¥Ό λ³‘λ ¬ν™”ν•κ³ , λ…Έλ“λ³„ λ²„ν‚·ν…μΌλ΅ λ½ κ²½ν•©μ„ μµμ†ν™”ν• μ „μ© λ²¤μΉλ§ν¬ ν΄ κ°λ°.
* **κ²°κ³Ό**: **180,000 OPSκΈ‰ κ³ λ¶€ν• ν™κ²½**μ„ κµ¬ν„ν•μ—¬ μ‹¤μ  μ΄μ μμ¤€μ μ„±λ¥ κ²€μ¦ λ° P99 μ§€μ—° μ‹κ°„ μ •λ°€λ„ ν™•λ³΄.
* [π‘‰ ν¬μ¤νΈ λ³΄λ¬κ°€κΈ°](https://hzeror.netlify.app/D-HASH-threadpoolexecutor/)


<br/>

## 6. νκ³ λ΅
Redisμ λ…Έλ“ κ³Όλ¶€ν• λ¬Έμ λ¥Ό ν•΄κ²°ν•κ³  μ‹¶μ–΄ μ‹μ‘ν• κ³ λ―Όμ΄ 1λ…„ 6κ°μ›”μ μ—°κµ¬μ™€ λ…Όλ¬Έ κ²μ¬λ΅ μ΄μ–΄μ΅μµλ‹λ‹¤.  
μ²λ¦¬λ‰κ³Ό λ¶€ν• λ¶„μ‚° μ‚¬μ΄μ νΈλ μ΄λ“ μ¤ν”„λ¥Ό μ°Ύλ” κ³Όμ •μ΄ μ‰½μ§€ μ•μ•μ§€λ§, κΈ°μ΅΄ μ‹μ¤ν…μ— λ¶€λ‹΄μ„ μ£Όμ§€ μ•λ” ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λ΅μ§μΌλ΅ μ μλ―Έν• μμΉλ¥Ό λ½‘μ•„λ‚Ό μ μμ—μµλ‹λ‹¤.  
μ•κ³ λ¦¬μ¦ μ„¤κ³„λ¶€ν„° μ‹¤ν—, μμ–΄ λ…Όλ¬Έ μ‘μ„±κΉμ§€ μ§μ ‘ ν•΄λ³΄λ©° λ¶„μ‚° μ‹μ¤ν…μ— λ€ν• μ΄ν•΄λ¥Ό ν¬κ² λ„“ν μ μμ—λ κ²½ν—μ΄μ—μµλ‹λ‹¤.  
